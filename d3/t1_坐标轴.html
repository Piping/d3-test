<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>t1_坐标轴</title>
<script src="d3.js"></script>
<style>
    .axis path,
    .axis line{
        fill: none;
        stroke: black;
        shape-rendering: crispEdges;
    }

    .axis text {
        font-family: sans-serif;
        font-size: 11px;
    }
</style>
</head>
<body>
<script>  
  // 坐标轴构成
  /*
    矩形 <rect>
    圆形 <circle>
    椭圆 <ellipse>
    线段 <line>
    折线 <polyline>
    多边形 <polygon>
    一种比较特殊，也是功能最强的元素：路径 <path>
    画布中的所有图形，都是由以上七种元素组成
    里面没有坐标轴 <axis>需要用其他元素来组合成坐标轴
    分组元素 <g>，是 SVG 画布中的元素,是将其他元素进行组合的容器
  */
/*
d3.svg.axis()：D3 中坐标轴的组件，能够在 SVG 中生成组成坐标轴的元素。
scale()：指定比例尺。
orient()：指定刻度的朝向，bottom 表示在坐标轴的下方显示。
ticks()：指定刻度的数量。
*/ 
//定义了坐标轴之后，只需要在 SVG 中添加一个分组元素 <g>，再将坐标轴的其他元素添加到这个 <g> 里即可。
    var width = 300;    //画布的宽度
    var height = 300;   //画布的高度

    var svg = d3.select("body")             
                .append("svg")              

var dataset = [ 2.5 , 0.3 , 1.7 , 1.3 , 0.9 ];

var linear = d3.scale.linear()
  .domain([0, d3.max(dataset)])
  .range([0, 250]);

var rectHeight = 25;
svg.selectAll("rect")
.data(dataset)
.enter()
.append("rect")
.attr("x",20)
.attr("y",function(d,i){
    return i * rectHeight;
})
.attr("width",function(d){
    return linear(d);
})
.attr("height",rectHeight-2)
.attr("fill","green");
var axis = d3.svg.axis()
 .scale(linear)      //指定比例尺
 .orient("bottom")   //指定刻度数据的显示方向
 .ticks(7);          //指定刻度的数量
//
/*
function foo(selection) {
  selection
      .attr("name1", "value1")
      .attr("name2", "value2");
}
foo(d3.selectAll("div"))等价形式d3.selectAll("div").call(foo);
svg.append("g").call(axis);等价形式axis(svg.append(g));
*/
svg.append("g")
  .attr("class","axis")
  .attr("transform","translate(20,130)")
  .call(axis);
</script>
</body>
</html>